# 테이블 파티셔닝

`테이블 파티셔닝`이란 하나의 테이블을 물리적으로 여러 테이블로 분할해서 데이터를 저장하는 기법을 말한다.  
  
테이블이 파티셔닝되면 내부적으로 여러 테이블로 분할되고, 실제 데이터와 인덱스도 나눠서 저장된다.  
분할된 테이블을 각각 `파티션`이라고 부르며, 사용자 입장에서는 기존처럼 하나의 테이블로 인식해서 사용하게 된다.
  
테이블을 파티셔닝하는 기준은 특정 컬럼이나, 계산식을 기준으로 `날짜/숫자 범위`나 `리스트`, `해시값` 형태가 있다. 

## 테이블 파티셔닝을 사용하는 목적

### 삭제 가능한 이력 데이터를 효율적으로 관리

로그성 데이터들이 저장되는 테이블에 파티셔닝을 적용하는 경우, 보관 기간에 따라 일정 기간 지난 데이터들을 제거할 때 데이터를 직접 삭제하는 것이 아닌 `파티션 드랍`으로 간단히 처리하는 것이 가능하다.  
  
파티션 드랍의 경우 테이블을 드랍하는 것처럼 디스크 공간을 완전히 반납하게 되어 서버 자원도 효율적으로 관리할 수 있다.

### 자원 사용 효율 증가 및 쿼리 성능 향상

데이터 접근 패턴이 특정 범위에 집중되는 경우 테이블 파티셔닝을 적용하면 자원을 효율적으로 사용할 수 있고 쿼리의 성능을 향상시킬 수 있다.
  
게시판처럼 최근에 저장된 데이터들을 위주로 조회하는 경우(게시판 1페이지) 날짜 범위로 파티셔닝하여 각 파티션이 특정 기간의 데이터만을 보유하도록 설정할 수 있다.
  
이 때 쿼리가 특정 날짜 범위의 데이터를 요청할 때, MySQL은 조건 범위에 해당하지 않는 파티션은 쿼리 처리에서 제외시킨다. 
이러한 작업을 `파티션 프루닝(Partition Pruning)`이라 부르는데, 특정 파티션의 인덱스 데이터만 탐색하게 되므로 물리 메모리를 효율적으로 사용할 수 있어
쿼리 성능을 향상시킬 수 있다.
  
이처럼 적절히 테이블을 파티셔닝해서 사용할 수 있다면, DB 서버의 자원 사용량을 최적화하는 것과 더불어 쿼리 응답 시간을 단축시켜 애플리케이션 서비스의 품질을 향상시킬 수 있다.

## Reference 

- [Real MySQL 시즌 1 - Part 2](https://www.inflearn.com/course/real-mysql-part-2/dashboard)
